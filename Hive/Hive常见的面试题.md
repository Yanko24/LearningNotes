#### Hive常见的面试题

##### 1. hive内部表和外部表的区别？

未被external修饰的是内部表（managed table），被external修饰的为外部表（external table）。区别是：

- 内部表数据由Hive自身管理，外部表数据由HDFS管理；
- 内部表数据存储的位置是hive.metastore.warehouse.dir（默认：/user/hive/warehouse），外部表数据的存储位置由自己指定（如果没有LOCATION，Hive将在HDFS上的/user/hive/warehouse文件夹下以外部表的表名创建一个文件夹，并将属于这个表的数据存放在这里）
- 删除内部表会直接删除元数据（metastore）及存储数据；删除外部表仅仅会删除元数据，HDFS上的文件并不会被删除

##### 2. hive有索引吗

Hive支持索引，但是Hive的索引与关系型数据库中的索引并不相同，比如：Hive不支持主键或者外键。

Hive索引可以建立在表中的某些列上，以提升一些操作的效率，例如减少MapReduce任务中需要读取的数据块的数量。

在可以预见到分区数据非常庞大的情况下，索引常常是优于分区的。

虽然Hive并不像事务数据库那样针对个别的行来执行查询、更新、删除等操作。它更多的用在多任务节点的场景下，快速地全表扫描大规模数据。但是在某些场景下，建立索引还是可以提高Hive指定表指定列的查询速度。

- 索引适用的场景
- Hive索引的机制如下：

##### 3. 运维如何对hive进行调度？

##### 4. ORC、Parquet等列式存储的优点？

##### 5. 数据建模用的哪些模型？

##### 6. 为什么要对数据仓库分层？

##### 7. 使用过Hive解析JSON串吗？

##### 8. 请说明hive中 Sort By，Order By，Cluster By，Distrbute By各代表什么意思？

##### 9. 怎么排查是哪里出现了数据倾斜？

##### 10. 数据倾斜怎么解决？

##### 11. hive 小文件过多怎么解决？

##### 12. hive优化有哪些？

